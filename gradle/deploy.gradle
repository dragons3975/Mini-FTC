ssh.settings {
    knownHosts = allowAnyHosts
}

task pkillJava {
    doLast {
        ssh.run {
            session(remotes.ev3dev) {
                println "pkill java || exit 0"
                execute "pkill java || exit 0"
            }
        }
    }
}

task deploy {
    doLast {
        ssh.run {
            session(remotes.ev3dev) {
                put from: "${projectDir}/build/libs/" + "${rootProject.name}" + "-" + version + ".jar", into: "/home/robot/"
                put from: "${projectDir}/scripts/start.sh", into: "/home/robot/"
            }
        }
    }
}
deploy.dependsOn clean, fatJar

task remoteRun {
    doLast {
        ssh.run {
            session(remotes.ev3dev) {
                println "time java -jar /home/robot/" + "${rootProject.name}" + "-" + version + ".jar "
                execute "time java -jar /home/robot/" + "${rootProject.name}" + "-" + version + ".jar "
            }
        }
    }
}
remoteRun.dependsOn pkillJava

task deployAndRun {
    doLast {
    }
}
deployAndRun.dependsOn deploy, remoteRun

//Organize tasks in a Group
def groupName = " mini-ftc"
pkillJava.group = groupName
deploy.group = groupName
remoteRun.group = groupName
deployAndRun.group = groupName
